var deltaX = [-1, +0, +1, +1, +1, +0, -1, -1];
var deltaY = [-1, -1, -1, +0, +1, +1, +1, +0];

var walkerX = 1;
var walkerY = 5;
var walkerDir = 0;

function pureWalk(history) {
	while (history[walkerX + deltaX[walkerDir]][walkerY + deltaY[walkerDir]] === true) {
		walkerDir = (walkerDir + 1) % 8;
	}
	while (history[walkerX + deltaX[walkerDir]][walkerY + deltaY[walkerDir]] !== true) {
		walkerDir = (walkerDir + 1) % 8;
	}

	walkerDir = (walkerDir + 7) % 8;

	walkerX += deltaX[walkerDir];
	walkerY += deltaY[walkerDir];
}

test("PureWalkerTest: Walk the line", function() {
	walkerX = 1;
	walkerY = 5;
	walkerDir = 0;

	var history = "" +
		"  1     \n" +
		"  1     \n" +
		"  1111  \n" +
		"     1  \n" +
		"  1111  \n" +
		"  1     \n" +
		"        \n";
	history = convertToField(history);

	for (var i = 0; i < 8; i++) {
		pureWalk(history);
	}

	equal(walkerX, 1);
	equal(walkerY, 1);
});

test("PureWalkerTest: Walk the cycle", function() {
	walkerX = 1;
	walkerY = 1;
	walkerDir = 0;

	var history = "" +
		"          \n" +
		"  111111  \n" +
		"   11     \n" +
		"    11    \n" +
		"          \n" +
		"          \n";
	history = convertToField(history);

	for (var i = 0; i < 16; i++) {
		pureWalk(history);
	}

	equal(walkerX, 1);
	equal(walkerY, 1);
});

